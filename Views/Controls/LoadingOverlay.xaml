<UserControl x:Class="PrimeAppBooks.Views.Controls.LoadingOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        <!-- Semi-transparent background overlay -->
        <Rectangle Fill="#80000000" />
        
        <!-- Loading content centered -->
        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
            <!-- Spinning loading indicator -->
            <Border Width="60" Height="60" CornerRadius="30" Background="#FF2B2B2B" 
                    Margin="0,0,0,20">
                <Border.Effect>
                    <DropShadowEffect Color="#000000" BlurRadius="10" ShadowDepth="3" Opacity="0.5" />
                </Border.Effect>
                <Border.RenderTransform>
                    <RotateTransform x:Name="LoadingSpinner" CenterX="30" CenterY="30" />
                </Border.RenderTransform>
                <Border.Triggers>
                    <EventTrigger RoutedEvent="Loaded">
                        <BeginStoryboard>
                            <Storyboard RepeatBehavior="Forever">
                                <DoubleAnimation Storyboard.TargetName="LoadingSpinner"
                                               Storyboard.TargetProperty="Angle"
                                               From="0" To="360" 
                                               Duration="0:0:1.5">
                                    <DoubleAnimation.EasingFunction>
                                        <PowerEase Power="2" EasingMode="EaseInOut" />
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Border.Triggers>
                
                <!-- Inner spinning elements -->
                <Grid>
                    <Ellipse Width="40" Height="40" Fill="Transparent" 
                             Stroke="#4CAF50" StrokeThickness="3" 
                             StrokeDashArray="15,5" StrokeDashOffset="0">
                        <Ellipse.RenderTransform>
                            <RotateTransform x:Name="InnerSpinner" CenterX="20" CenterY="20" />
                        </Ellipse.RenderTransform>
                        <Ellipse.Triggers>
                            <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetName="InnerSpinner"
                                                       Storyboard.TargetProperty="Angle"
                                                       From="0" To="360" 
                                                       Duration="0:0:1">
                                            <DoubleAnimation.EasingFunction>
                                                <PowerEase Power="2" EasingMode="EaseInOut" />
                                            </DoubleAnimation.EasingFunction>
                                        </DoubleAnimation>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Ellipse.Triggers>
                    </Ellipse>
                    
                    <!-- Center dot -->
                    <Ellipse Width="8" Height="8" Fill="#4CAF50" 
                             HorizontalAlignment="Center" VerticalAlignment="Center" />
                </Grid>
            </Border>
            
            <!-- Loading text -->
            <TextBlock Text="Loading..." 
                       FontFamily="Century Gothic"
                       FontSize="16" 
                       FontWeight="SemiBold"
                       Foreground="White" 
                       HorizontalAlignment="Center" />
        </StackPanel>
    </Grid>
</UserControl>
