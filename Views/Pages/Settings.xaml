<Page x:Class="PrimeAppBooks.Views.Pages.Settings"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:hc="https://handyorg.github.io/handycontrol"
      d:DesignHeight="900"
      d:DesignWidth="1280"
      Background="Transparent"
      mc:Ignorable="d">

    <ScrollViewer Style="{StaticResource ModernScrollViewer}">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Header Section -->
            <Border Grid.Row="0" Margin="0,0,0,20" Style="{StaticResource ModernCardStyle}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                        <TextBlock Style="{StaticResource WelcomeTitleText}" Text="Settings" />
                        <TextBlock Style="{StaticResource WelcomeSubtitleText}" Text="Configure your accounting system preferences and business settings" />
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                        <Button
                            Margin="5,0"
                            Command="{Binding SaveSettingsCommand}"
                            Content="💾 Save Changes"
                            Style="{StaticResource ModernActionButton}" />
                        <Button
                            Margin="5,0"
                            Command="{Binding RestoreDefaultsCommand}"
                            Content="🔄 Reset to Defaults"
                            Style="{StaticResource ModernSecondaryButton}" />
                        <Button
                            Margin="5,0"
                            Command="{Binding ExportSettingsCommand}"
                            Content="📤 Export"
                            Style="{StaticResource ModernSecondaryButton}" />
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Settings Content Area -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="280" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Settings Navigation -->
                <Border Grid.Column="0" Margin="0,0,15,0" Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="Categories" Style="{StaticResource SectionHeaderText}" Margin="0,0,0,15" />
                        <RadioButton Name="GeneralTab" GroupName="SettingsCategories" Content="⚙️ General &amp; Company" Style="{StaticResource SettingsCategoryRadioButton}" IsChecked="True"
                                   Checked="CategoryButton_Checked" Tag="0" />
                        <RadioButton Name="AccountingTab" GroupName="SettingsCategories" Content="📊 Accounting Rules" Style="{StaticResource SettingsCategoryRadioButton}"
                                   Checked="CategoryButton_Checked" Tag="1" />
                        <RadioButton Name="TaxTab" GroupName="SettingsCategories" Content="💰 Tax Configuration" Style="{StaticResource SettingsCategoryRadioButton}"
                                   Checked="CategoryButton_Checked" Tag="2" />
                        <RadioButton Name="SecurityTab" GroupName="SettingsCategories" Content="🔒 Security &amp; Access" Style="{StaticResource SettingsCategoryRadioButton}"
                                   Checked="CategoryButton_Checked" Tag="3" />
                        <RadioButton Name="BackupTab" GroupName="SettingsCategories" Content="💾 Backup &amp; Data" Style="{StaticResource SettingsCategoryRadioButton}"
                                   Checked="CategoryButton_Checked" Tag="4" />
                        <RadioButton Name="ReportsTab" GroupName="SettingsCategories" Content="📋 Reports &amp; Print" Style="{StaticResource SettingsCategoryRadioButton}"
                                   Checked="CategoryButton_Checked" Tag="5" />
                        <RadioButton Name="NotificationTab" GroupName="SettingsCategories" Content="🔔 Notifications" Style="{StaticResource SettingsCategoryRadioButton}"
                                   Checked="CategoryButton_Checked" Tag="6" />
                        <RadioButton Name="IntegrationTab" GroupName="SettingsCategories" Content="🔗 Integrations" Style="{StaticResource SettingsCategoryRadioButton}"
                                   Checked="CategoryButton_Checked" Tag="7" />
                    </StackPanel>
                </Border>

                <!-- Settings Content -->
                <Border Grid.Column="1" Style="{StaticResource ModernCardStyle}">
                    <TabControl x:Name="SettingsTabControl" BorderThickness="0" Background="Transparent">
                        <TabControl.Style>
                            <Style TargetType="TabControl">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="TabControl">
                                            <ContentPresenter ContentSource="SelectedContent" />
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </TabControl.Style>

                        <!-- General & Company Settings -->
                        <TabItem>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="25" MaxWidth="1000">
                                    <TextBlock Style="{StaticResource SectionHeaderText}" Text="⚙️ General &amp; Company Settings" Margin="0,0,0,20" />

                                    <!-- Company Information -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <TextBlock Text="Company Information" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" Margin="0,0,0,15" />

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Company Name:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="1" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding CompanyName}" hc:InfoElement.Placeholder="Enter company name" />
                                            </Grid>

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Legal Name:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="1" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding CompanyLegalName}" hc:InfoElement.Placeholder="Full legal business name" />
                                            </Grid>

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Address:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="1" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding CompanyAddress}" AcceptsReturn="True" Height="60" hc:InfoElement.Placeholder="Complete business address" />
                                            </Grid>

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Tax ID:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="1" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding TaxId}" hc:InfoElement.Placeholder="Tax ID/EIN" />
                                                <TextBlock Grid.Column="3" Text="Business Number:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="4" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding BusinessNumber}" hc:InfoElement.Placeholder="Registration number" />
                                            </Grid>
                                        </StackPanel>
                                    </Border>

                                    <!-- Regional Settings -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <TextBlock Text="Regional &amp; Format Settings" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" Margin="0,0,0,15" />

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Currency:" Style="{StaticResource SettingsLabelStyle}" />
                                                <ComboBox Grid.Column="1" ItemsSource="{Binding Currencies}" SelectedItem="{Binding SelectedCurrency}" Style="{StaticResource ModernComboBox}" />
                                                <TextBlock Grid.Column="3" Text="Date Format:" Style="{StaticResource SettingsLabelStyle}" />
                                                <ComboBox Grid.Column="4" ItemsSource="{Binding DateFormats}" SelectedItem="{Binding DateFormat}" Style="{StaticResource ModernComboBox}" />
                                            </Grid>

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Number Format:" Style="{StaticResource SettingsLabelStyle}" />
                                                <ComboBox Grid.Column="1" ItemsSource="{Binding NumberFormats}" SelectedItem="{Binding NumberFormat}" Style="{StaticResource ModernComboBox}" />
                                                <TextBlock Grid.Column="3" Text="Time Zone:" Style="{StaticResource SettingsLabelStyle}" />
                                                <ComboBox Grid.Column="4" ItemsSource="{Binding TimeZones}" SelectedItem="{Binding TimeZone}" Style="{StaticResource ModernComboBox}" />
                                            </Grid>
                                        </StackPanel>
                                    </Border>

                                    <!-- Interface Preferences -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <TextBlock Text="Interface Preferences" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" Margin="0,0,0,15" />
                                            <UniformGrid Columns="3">
                                                <CheckBox Content="Dark Theme" IsChecked="{Binding DarkMode}" Margin="0,0,15,10" Foreground="White" />
                                                <CheckBox Content="Enable Animations" IsChecked="{Binding EnableAnimations}" Margin="0,0,15,10" Foreground="White" />
                                                <CheckBox Content="Show Tooltips" IsChecked="{Binding ShowTooltips}" Margin="0,0,15,10" Foreground="White" />
                                                <CheckBox Content="Compact View" IsChecked="{Binding CompactView}" Margin="0,0,15,10" Foreground="White" />
                                                <CheckBox Content="Show Grid Lines" IsChecked="{Binding ShowGridLines}" Margin="0,0,15,10" Foreground="White" />
                                                <CheckBox Content="Auto-save Changes" IsChecked="{Binding AutoSave}" Margin="0,0,15,10" Foreground="White" />
                                            </UniformGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Accounting Rules -->
                        <TabItem>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="25" MaxWidth="1000">
                                    <TextBlock Style="{StaticResource SectionHeaderText}" Text="📊 Accounting Rules &amp; Policies" Margin="0,0,0,20" />

                                    <!-- Fiscal Year Settings -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <TextBlock Text="Fiscal Year Configuration" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" Margin="0,0,0,15" />

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="200" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Fiscal Year Starts:" Style="{StaticResource SettingsLabelStyle}" />
                                                <ComboBox Grid.Column="1" ItemsSource="{Binding FiscalYearStarts}" SelectedItem="{Binding FiscalYearStart}" Style="{StaticResource ModernComboBox}" />
                                                <CheckBox Grid.Column="2" Content="Auto-close previous fiscal year" IsChecked="{Binding AutoCloseFiscalYear}" Margin="15,0,0,0" VerticalAlignment="Center" Foreground="White" />
                                            </Grid>

                                            <UniformGrid Columns="2" Margin="0,10,0,0">
                                                <CheckBox Content="Lock closed periods" IsChecked="{Binding LockClosedPeriods}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Warn when posting to closed periods" IsChecked="{Binding WarnClosedPeriods}" Margin="0,0,15,5" Foreground="White" />
                                            </UniformGrid>
                                        </StackPanel>
                                    </Border>

                                    <!-- Transaction Settings -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <TextBlock Text="Transaction &amp; Journal Settings" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" Margin="0,0,0,15" />

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Invoice Prefix:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="1" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding InvoicePrefix}" hc:InfoElement.Placeholder="INV-" />
                                                <TextBlock Grid.Column="3" Text="Receipt Prefix:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="4" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding ReceiptPrefix}" hc:InfoElement.Placeholder="RCP-" />
                                            </Grid>

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="200" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Starting Number:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="1" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding StartingNumber}" hc:InfoElement.Placeholder="1000" />
                                                <CheckBox Grid.Column="2" Content="Auto-number all transactions" IsChecked="{Binding AutoNumberTransactions}" Margin="15,0,0,0" VerticalAlignment="Center" Foreground="White" />
                                            </Grid>

                                            <UniformGrid Columns="2" Margin="0,10,0,0">
                                                <CheckBox Content="Require approval for journal entries" IsChecked="{Binding RequireJournalApproval}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Allow negative inventory" IsChecked="{Binding AllowNegativeInventory}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Track cost center in transactions" IsChecked="{Binding TrackCostCenter}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Enable multi-currency transactions" IsChecked="{Binding MultiCurrency}" Margin="0,0,15,5" Foreground="White" />
                                            </UniformGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Tax Configuration -->
                        <TabItem>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="25" MaxWidth="1000">
                                    <TextBlock Style="{StaticResource SectionHeaderText}" Text="💰 Tax Configuration" Margin="0,0,0,20" />

                                    <!-- Default Tax Settings -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <TextBlock Text="Default Tax Settings" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" Margin="0,0,0,15" />

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="120" />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="120" />
                                                    <ColumnDefinition Width="30" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Default Sales Tax:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="1" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding DefaultSalesTaxRate}" hc:InfoElement.Placeholder="15.00" />
                                                <TextBlock Grid.Column="3" Text="Default Purchase Tax:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="4" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding DefaultPurchaseTaxRate}" hc:InfoElement.Placeholder="15.00" />
                                                <TextBlock Grid.Column="5" Text="%" VerticalAlignment="Center" Margin="5,0,0,0" />
                                            </Grid>

                                            <UniformGrid Columns="2" Margin="0,10,0,0">
                                                <CheckBox Content="Prices include tax by default" IsChecked="{Binding TaxInclusive}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Auto-calculate taxes on transactions" IsChecked="{Binding AutoCalculateTaxes}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Track tax by line item" IsChecked="{Binding TrackTaxByLine}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Generate tax reports automatically" IsChecked="{Binding AutoGenerateTaxReports}" Margin="0,0,15,5" Foreground="White" />
                                            </UniformGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Security & Access -->
                        <TabItem>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="25" MaxWidth="1000">
                                    <TextBlock Style="{StaticResource SectionHeaderText}" Text="🔒 Security &amp; Access Control" Margin="0,0,0,20" />

                                    <!-- User Authentication -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <TextBlock Text="User Authentication" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" Margin="0,0,0,15" />

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="120" />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="120" />
                                                    <ColumnDefinition Width="60" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Session Timeout:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="1" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding SessionTimeout}" hc:InfoElement.Placeholder="30" />
                                                <TextBlock Grid.Column="3" Text="Password Expiry:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="4" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding PasswordExpirationDays}" hc:InfoElement.Placeholder="90" />
                                                <TextBlock Grid.Column="5" Text="days" VerticalAlignment="Center" Margin="5,0,0,0" />
                                            </Grid>

                                            <UniformGrid Columns="2" Margin="0,10,0,0">
                                                <CheckBox Content="Require strong passwords" IsChecked="{Binding RequireStrongPasswords}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Enable two-factor authentication" IsChecked="{Binding TwoFactorAuth}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Auto-logout inactive users" IsChecked="{Binding AutoLogout}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Lock account after failed attempts" IsChecked="{Binding LockAfterFailedAttempts}" Margin="0,0,15,5" Foreground="White" />
                                            </UniformGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Backup & Data -->
                        <TabItem>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="25" MaxWidth="1000">
                                    <TextBlock Style="{StaticResource SectionHeaderText}" Text="💾 Backup &amp; Data Management" Margin="0,0,0,20" />

                                    <!-- Automated Backup -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <TextBlock Text="Automated Backup Configuration" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" Margin="0,0,0,15" />

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Backup Frequency:" Style="{StaticResource SettingsLabelStyle}" />
                                                <ComboBox Grid.Column="1" ItemsSource="{Binding BackupFrequencies}" SelectedItem="{Binding BackupFrequency}" Style="{StaticResource ModernComboBox}" />
                                                <TextBlock Grid.Column="3" Text="Retention Period:" Style="{StaticResource SettingsLabelStyle}" />
                                                <ComboBox Grid.Column="4" ItemsSource="{Binding RetentionPeriods}" SelectedItem="{Binding RetentionPeriod}" Style="{StaticResource ModernComboBox}" />
                                            </Grid>

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Backup Location:" Style="{StaticResource SettingsLabelStyle}" />
                                                <TextBox Grid.Column="1" Style="{StaticResource ModernTextBoxStyle}" Text="{Binding BackupLocation}" hc:InfoElement.Placeholder="Select backup directory" />
                                                <Button Grid.Column="2" Content="📁 Browse" Style="{StaticResource ModernSecondaryButton}" Margin="10,0,0,0" />
                                            </Grid>

                                            <UniformGrid Columns="3" Margin="0,10,0,0">
                                                <CheckBox Content="Enable automatic backups" IsChecked="{Binding AutoBackupEnabled}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Compress backup files" IsChecked="{Binding CompressBackups}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Encrypt backup files" IsChecked="{Binding EncryptBackups}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Verify backup integrity" IsChecked="{Binding VerifyBackups}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Email backup notifications" IsChecked="{Binding EmailBackupNotifications}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Cloud backup sync" IsChecked="{Binding CloudBackupSync}" Margin="0,0,15,5" Foreground="White" />
                                            </UniformGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Reports & Print -->
                        <TabItem>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="25" MaxWidth="1000">
                                    <TextBlock Style="{StaticResource SectionHeaderText}" Text="📋 Reports &amp; Print Configuration" Margin="0,0,0,20" />

                                    <!-- Report Preferences -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <TextBlock Text="Report Preferences" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" Margin="0,0,0,15" />

                                            <Grid Style="{StaticResource SettingsRowStyle}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="180" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Default Format:" Style="{StaticResource SettingsLabelStyle}" />
                                                <ComboBox Grid.Column="1" ItemsSource="{Binding ReportFormats}" SelectedItem="{Binding DefaultReportFormat}" Style="{StaticResource ModernComboBox}" />
                                                <TextBlock Grid.Column="3" Text="Auto-refresh:" Style="{StaticResource SettingsLabelStyle}" />
                                                <ComboBox Grid.Column="4" ItemsSource="{Binding RefreshIntervals}" SelectedItem="{Binding ReportRefreshInterval}" Style="{StaticResource ModernComboBox}" />
                                            </Grid>

                                            <UniformGrid Columns="3" Margin="0,10,0,0">
                                                <CheckBox Content="Show company logo on reports" IsChecked="{Binding ShowLogoOnReports}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Include page numbers" IsChecked="{Binding IncludePageNumbers}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Show report generation time" IsChecked="{Binding ShowGenerationTime}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Enable drill-down in reports" IsChecked="{Binding EnableReportDrillDown}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Auto-email scheduled reports" IsChecked="{Binding AutoEmailReports}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Save reports automatically" IsChecked="{Binding AutoSaveReports}" Margin="0,0,15,5" Foreground="White" />
                                            </UniformGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Notifications -->
                        <TabItem>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="25" MaxWidth="1000">
                                    <TextBlock Style="{StaticResource SectionHeaderText}" Text="🔔 Notification Settings" Margin="0,0,0,20" />

                                    <!-- System Notifications -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <TextBlock Text="System Notifications" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" Margin="0,0,0,15" />

                                            <UniformGrid Columns="2" Margin="0,10,0,0">
                                                <CheckBox Content="Show desktop notifications" IsChecked="{Binding ShowDesktopNotifications}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Play notification sounds" IsChecked="{Binding PlayNotificationSounds}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Show system tray notifications" IsChecked="{Binding ShowTrayNotifications}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Notify on application updates" IsChecked="{Binding NotifyOnUpdates}" Margin="0,0,15,5" Foreground="White" />
                                            </UniformGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Integrations -->
                        <TabItem>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="25" MaxWidth="1000">
                                    <TextBlock Style="{StaticResource SectionHeaderText}" Text="🔗 System Integrations" Margin="0,0,0,20" />

                                    <!-- Banking Integration -->
                                    <Border Style="{StaticResource SettingsGroupStyle}">
                                        <StackPanel>
                                            <Grid Margin="0,0,0,15">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Column="0" Text="Banking &amp; Payment Integration" Style="{StaticResource DetailLabelText}" FontWeight="SemiBold" />
                                                <Button Grid.Column="1" Content="🔗 Manage Connections" Style="{StaticResource ModernSecondaryButton}" />
                                            </Grid>

                                            <UniformGrid Columns="2" Margin="0,10,0,0">
                                                <CheckBox Content="Enable bank feed imports" IsChecked="{Binding EnableBankFeeds}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Auto-match transactions" IsChecked="{Binding AutoMatchTransactions}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Enable online payments" IsChecked="{Binding EnableOnlinePayments}" Margin="0,0,15,5" Foreground="White" />
                                                <CheckBox Content="Sync payment confirmations" IsChecked="{Binding SyncPaymentConfirmations}" Margin="0,0,15,5" Foreground="White" />
                                            </UniformGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>
                </Border>
            </Grid>
        </Grid>
    </ScrollViewer>
</Page>